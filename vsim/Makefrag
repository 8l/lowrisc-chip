#--------------------------------------------------------------------
# Sources
#--------------------------------------------------------------------

# Verilog sources

sim_vsrcs = \
	$(generated_dir)/$(MODEL).$(CONFIG).v \
	$(generated_dir)/consts.$(CONFIG).vh \

#--------------------------------------------------------------------
# Build Verilog
#--------------------------------------------------------------------

verilog: $(sim_vsrcs)

.PHONY: verilog

#--------------------------------------------------------------------
# Build rules
#--------------------------------------------------------------------

# Synopsys VCS

VCS = vcs -full64

VCS_OPTS = -notice -line +lint=all,noVCDE,noONGS,noUI -error=PCWM-L -timescale=1ns/10ps -quiet \
	+rad +v2k +vcs+lic+wait \
	+define+CLOCK_PERIOD=0.5 $(sim_vsrcs) \
	+libext+.v \

IV = iverilog

IV_OPS = -g2005 -v -W all

#--------------------------------------------------------------------
# Build the simulator
#--------------------------------------------------------------------

sim_vcs = $(sim_dir)/sim-vcs-$(CONFIG)
$(sim_vcs): $(sim_vsrcs)
	$(VCS) $(VCS_OPTS) -o $(sim_vcs) \

sim_iv = $(sim_dir)/sim-iv-$(CONFIG)
$(sim_iv): $(sim_vsrcs)
	$(IV) $(IV_OPTS) -o $(sim_iv) $(sim_vsrcs)\

# emacs local variable

# Local Variables:
# mode: makefile
# End:
